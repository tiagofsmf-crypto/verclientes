<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gaia Phone - Gestão de Clientes</title>
<style>
body {
font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
background-color: #f2f4f7;
margin: 0;
padding: 0;
}
.container {
width: 90%;
max-width: 900px;
margin: 20px auto;
display: flex;
flex-direction: column;
gap: 20px;
}
h1 {
text-align: center;
color: #333;
}
.logo {
display: block;
margin: 0 auto 20px auto;
width: 150px;
}
.card {
background: white;
padding: 20px;
border-radius: 10px;
box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}
input, select, button {
display: block;
margin: 10px 0;
padding: 10px;
width: 100%;
font-size: 16px;
border-radius: 5px;
border: 1px solid #ccc;
}
button {
background-color: #003366;
color: white;
border: none;
cursor: pointer;
}
button:hover {
background-color: #001f4d;
}
.print-container {
display: none;
background: white;
padding: 20px;
border-radius: 10px;
max-width: 600px;
margin: 0 auto;
text-align: center;
box-shadow: 0 2px 10px rgba(0,0,0,0.2);
}
.print-container h2 {
margin: 5px 0;
}
.print-container p {
margin: 5px 0;
font-size: 16px;
}
@media print {
body * { visibility: hidden; }
.print-container, .print-container * { visibility: visible; }
.print-container { position: absolute; top:0; left:0; width:100%; margin:0; padding:20px; box-shadow:none; }
}
</style>
</head>
<body>

<h1>Gaia Phone - Gestão de Clientes</h1>
<img src="logo.png" class="logo" alt="Logo Gaia Phone">

<div class="container">
<!-- Adicionar Cliente -->
<div class="card" id="addClientCard">
<h2>Adicionar Cliente</h2>
<input type="text" id="nome" placeholder="Nome">
<input type="text" id="telefone" placeholder="Telefone">
<input type="text" id="imei" placeholder="IMEI">
<input type="text" id="marca" placeholder="Marca do Equipamento">
<input type="text" id="modelo" placeholder="Modelo do Equipamento">
<input type="text" id="avaria" placeholder="Avaria">
<button onclick="adicionarCliente()">Adicionar Cliente</button>
<button onclick="guardarEdicao()" id="guardarBtn" style="display:none;">Guardar Cliente</button>
</div>

<!-- Selecionar Cliente -->
<div class="card">
<h2>Clientes</h2>
<input type="text" id="pesquisa" placeholder="Procurar pelo Telefone ou IMEI" oninput="filtrarClientes()">
<select id="clienteSelect" onchange="mostrarCliente()">
<option value="">-- Selecionar Cliente --</option>
</select>
<button onclick="editarCliente()" id="editarBtn" style="margin-top:10px;">Editar Cliente</button>
</div>

<!-- Ficha de Impressão -->
<div class="print-container" id="printContainer">
<img src="logo.png" class="logo" style="width:100px;" alt="Logo Gaia Phone">
<h2>Reparações de Telemóveis</h2>
<p>Rua José Rocha, 189 A, 4430-123 V.N. Gaia</p>
<p>222 441 808 | 931 965 105</p>
<p>gaiaphone@gmail.com</p>
<hr>
<p><strong>Nome:</strong> <span id="pNome"></span></p>
<p><strong>Telefone:</strong> <span id="pTelefone"></span></p>
<p><strong>IMEI:</strong> <span id="pIMEI"></span></p>
<p><strong>Marca:</strong> <span id="pMarca"></span></p>
<p><strong>Modelo:</strong> <span id="pModelo"></span></p>
<p><strong>Avaria:</strong> <span id="pAvaria"></span></p>
<p><strong>Data de Registo:</strong> <span id="pData"></span></p>
<p><strong>Status:</strong></p>
<label><input type="radio" name="statusPrint" value="Não Reparado" checked> Não Reparado</label>
<label><input type="radio" name="statusPrint" value="Reparado"> Reparado</label>
<button onclick="imprimirFicha()" style="margin-top:10px;">Imprimir</button>
</div>
</div>

<script>
// Local Storage
let clientes = JSON.parse(localStorage.getItem('clientes')) || [];
let editIndex = null;

// Inicializar select
atualizarSelect();

// Adicionar Cliente
function adicionarCliente() {
const cliente = lerCampos();
if (!cliente) return;
clientes.push(cliente);
salvarLocalStorage();
atualizarSelect();
limparCampos();
}

// Guardar edição
function guardarEdicao() {
if (editIndex === null) return;
const cliente = lerCampos();
if (!cliente) return;
clientes[editIndex] = cliente;
salvarLocalStorage();
atualizarSelect();
limparCampos();
editIndex = null;
document.getElementById('guardarBtn').style.display = 'none';
}

// Ler campos
function lerCampos() {
const nome = document.getElementById('nome').value;
const telefone = document.getElementById('telefone').value;
const imei = document.getElementById('imei').value;
const marca = document.getElementById('marca').value;
const modelo = document.getElementById('modelo').value;
const avaria = document.getElementById('avaria').value;
const data = new Date().toLocaleDateString();
if (!nome) { alert('Preencha o nome do cliente!'); return null; }
return {nome, telefone, imei, marca, modelo, avaria, data};
}

// Atualizar select
function atualizarSelect() {
const select = document.getElementById('clienteSelect');
select.innerHTML = '<option value="">-- Selecionar Cliente --</option>';
clientes.forEach((c, i) => {
const option = document.createElement('option');
option.value = i;
option.text = `${c.nome} | ${c.telefone} | ${c.imei}`;
select.add(option);
});
}

// Limpar campos
function limparCampos() {
['nome','telefone','imei','marca','modelo','avaria'].forEach(id => document.getElementById(id).value='');
}

// Mostrar cliente
function mostrarCliente() {
const index = document.getElementById('clienteSelect').value;
if (index === "") return;
const cliente = clientes[index];
preencherFicha(cliente);
}

// Preencher ficha de impressão
function preencherFicha(cliente) {
document.getElementById('pNome').innerText = cliente.nome;
document.getElementById('pTelefone').innerText = cliente.telefone;
document.getElementById('pIMEI').innerText = cliente.imei;
document.getElementById('pMarca').innerText = cliente.marca;
document.getElementById('pModelo').innerText = cliente.modelo;
document.getElementById('pAvaria').innerText = cliente.avaria;
document.getElementById('pData').innerText = cliente.data;
document.getElementById('printContainer').style.display = 'block';
}

// Editar cliente
function editarCliente() {
const index = document.getElementById('clienteSelect').value;
if (index === "") return alert('Selecione um cliente para editar!');
const cliente = clientes[index];
['nome','telefone','imei','marca','modelo','avaria'].forEach(id => document.getElementById(id).value = cliente[id]);
editIndex = index;
document.getElementById('guardarBtn').style.display = 'block';
window.scrollTo({top: document.getElementById('addClientCard').offsetTop - 20, behavior: 'smooth'});
}

// Filtrar clientes
function filtrarClientes() {
const filtro = document.getElementById('pesquisa').value.toLowerCase();
const select = document.getElementById('clienteSelect');
select.innerHTML = '<option value="">-- Selecionar Cliente --</option>';
clientes.forEach((c, i) => {
if (c.telefone.toLowerCase().includes(filtro) || c.imei.toLowerCase().includes(filtro)) {
const option = document.createElement('option');
option.value = i;
option.text = `${c.nome} | ${c.telefone} | ${c.imei}`;
select.add(option);
}
});
}

// Imprimir ficha
function imprimirFicha() {
const status = document.querySelector('input[name="statusPrint"]:checked').value;
const statusEl = document.createElement('p');
statusEl.innerHTML = `<strong>Status:</strong> ${status}`;
document.getElementById('printContainer').appendChild(statusEl);
window.print();
statusEl.remove();
}

// Salvar localStorage
function salvarLocalStorage() {
localStorage.setItem('clientes', JSON.stringify(clientes));
}
</script>
</body>
</html>
