<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gaia Phone - Gestão de Clientes</title>
<style>
body, html {
margin: 0;
padding: 0;
font-family: Arial, sans-serif;
background-color: #f5f5f5;
color: #333;
}

/* LOGIN */
.login-container {
display: flex;
flex-direction: column;
align-items: center;
justify-content: center;
height: 100vh;
background-color: #0d1a33;
color: #fff;
}
.login-container img {
width: 120px;
margin-bottom: 20px;
}
.login-container input {
padding: 10px;
margin: 5px 0;
width: 250px;
border-radius: 5px;
border: 1px solid #555;
}
.login-container button {
padding: 10px;
width: 250px;
margin-top: 10px;
background-color: #16294d;
border: none;
color: white;
border-radius: 5px;
cursor: pointer;
}
.login-container button:hover {
background-color: #1f3a6a;
}

/* SITE */
.site-container {
display: none;
padding: 20px;
max-width: 900px;
margin: 0 auto;
}

/* Layout */
.flex-row {
display: flex;
flex-wrap: wrap;
gap: 20px;
}
.flex-column {
display: flex;
flex-direction: column;
flex: 1;
}

input, select, button {
padding: 10px;
margin: 5px 0;
font-size: 16px;
border-radius: 5px;
border: 1px solid #ccc;
}
button {
background-color: #0d1a33;
color: white;
border: none;
cursor: pointer;
}
button:hover {
background-color: #16294d;
}

/* Ficha Impressão */
.print-container {
display: none;
background: white;
padding: 20px;
border-radius: 8px;
max-width: 600px;
margin: 20px auto;
text-align: center;
box-shadow: 0 4px 10px rgba(0,0,0,0.2);
}
.print-container img {
width: 100px;
margin-bottom: 10px;
}
.print-container h2 {
margin-bottom: 5px;
font-size: 22px;
}
.print-container p {
margin: 5px 0;
font-size: 16px;
}
@media print {
body * { visibility: hidden; }
.print-container, .print-container * { visibility: visible; }
.print-container { position: absolute; left: 0; top: 0; width: 100%; margin: 0; padding: 20px; box-shadow: none; }
}
</style>
</head>
<body>

<!-- LOGIN -->
<div class="login-container" id="loginDiv">
<img src="logo.png" alt="Logo Gaia Phone">
<input type="password" id="loginPassword" placeholder="Digite a senha">
<button onclick="login()">Entrar</button>
</div>

<!-- SITE -->
<div class="site-container" id="siteDiv">
<h1>Gaia Phone - Gestão de Clientes</h1>

<div class="flex-row">
<div class="flex-column">
<h2>Adicionar / Editar Cliente</h2>
<input type="text" id="nome" placeholder="Nome">
<input type="text" id="telefone" placeholder="Telefone">
<input type="text" id="imei" placeholder="IMEI">
<input type="text" id="marca" placeholder="Marca">
<input type="text" id="modelo" placeholder="Modelo">
<input type="text" id="avaria" placeholder="Avaria">
<button onclick="adicionarCliente()">Adicionar Cliente</button>
<button onclick="guardarCliente()">Guardar Cliente</button>
</div>

<div class="flex-column">
<h2>Clientes</h2>
<input type="text" id="pesquisa" placeholder="Procurar por Telefone ou IMEI" oninput="filtrarClientes()">
<select id="clienteSelect" onchange="mostrarCliente()">
<option value="">-- Selecionar Cliente --</option>
</select>
<button onclick="editarCliente()">Editar Cliente</button>

<h3>Status</h3>
<label><input type="radio" name="status" value="Reparado"> Reparado</label>
<label><input type="radio" name="status" value="Não Reparado"> Não Reparado</label>

<button onclick="mostrarFicha()">Imprimir</button>
</div>
</div>

<div class="print-container" id="printContainer">
<img src="logo.png" alt="Logo Gaia Phone">
<h2>Reparações de Telemóveis</h2>
<p>Rua José Rocha, 189 A, 4430-123 V.N. Gaia</p>
<p>222 441 808 | 931 965 105</p>
<p>gaiaphone@gmail.com</p>
<hr>
<p><strong>Nome:</strong> <span id="pNome"></span></p>
<p><strong>Telefone:</strong> <span id="pTelefone"></span></p>
<p><strong>IMEI:</strong> <span id="pIMEI"></span></p>
<p><strong>Marca:</strong> <span id="pMarca"></span></p>
<p><strong>Modelo:</strong> <span id="pModelo"></span></p>
<p><strong>Avaria:</strong> <span id="pAvaria"></span></p>
<p><strong>Data:</strong> <span id="pData"></span></p>
<p><strong>Status:</strong> <span id="pStatus"></span></p>
</div>
</div>

<script>
const PASSWORD = "roque";
let clientes = JSON.parse(localStorage.getItem("clientes")) || [];
let clienteEditando = null;

// LOGIN
document.getElementById("loginPassword").addEventListener("keyup", e => {
if (e.key === "Enter") login();
});
function login() {
if (document.getElementById("loginPassword").value === PASSWORD) {
document.getElementById("loginDiv").style.display = "none";
document.getElementById("siteDiv").style.display = "block";
atualizarSelect();
} else alert("Senha incorreta!");
}

// ADICIONAR CLIENTE
function adicionarCliente() {
const nome = nomeValor(), telefone = telefoneValor(), imei = imeiValor(), marca = marcaValor(), modelo = modeloValor(), avaria = avariaValor();
const data = new Date().toLocaleDateString();
if (!nome) return alert("Preencha o nome!");

if (clienteEditando !== null) clientes[clienteEditando] = { nome, telefone, imei, marca, modelo, avaria, data };
else clientes.push({ nome, telefone, imei, marca, modelo, avaria, data });

localStorage.setItem("clientes", JSON.stringify(clientes));
clienteEditando = null;
atualizarSelect();
limparCampos();
}

function guardarCliente() {
localStorage.setItem("clientes", JSON.stringify(clientes));
alert("Clientes guardados com sucesso!");
}

function nomeValor(){return document.getElementById("nome").value;}
function telefoneValor(){return document.getElementById("telefone").value;}
function imeiValor(){return document.getElementById("imei").value;}
function marcaValor(){return document.getElementById("marca").value;}
function modeloValor(){return document.getElementById("modelo").value;}
function avariaValor(){return document.getElementById("avaria").value;}

// LIMPAR CAMPOS
function limparCampos(){
['nome','telefone','imei','marca','modelo','avaria'].forEach(id=>document.getElementById(id).value="");
}

// ATUALIZAR SELECT
function atualizarSelect(){
const select=document.getElementById("clienteSelect");
select.innerHTML='<option value="">-- Selecionar Cliente --</option>';
clientes.forEach((c,i)=>{
const o=document.createElement("option");
o.value=i;o.text=`${c.nome} | ${c.telefone} | ${c.imei}`;
select.add(o);
});
}

// MOSTRAR CLIENTE
function mostrarCliente(){
const i=document.getElementById("clienteSelect").value;
if(i==="")return;
const c=clientes[i];
document.getElementById("pNome").innerText=c.nome;
document.getElementById("pTelefone").innerText=c.telefone;
document.getElementById("pIMEI").innerText=c.imei;
document.getElementById("pMarca").innerText=c.marca;
document.getElementById("pModelo").innerText=c.modelo;
document.getElementById("pAvaria").innerText=c.avaria;
document.getElementById("pData").innerText=c.data;
}

// FILTRAR
function filtrarClientes(){
const f=document.getElementById("pesquisa").value.toLowerCase();
const s=document.getElementById("clienteSelect");
s.innerHTML='<option value="">-- Selecionar Cliente --</option>';
clientes.forEach((c,i)=>{
if(c.telefone.toLowerCase().includes(f)||c.imei.toLowerCase().includes(f)){
const o=document.createElement("option");
o.value=i;o.text=`${c.nome} | ${c.telefone} | ${c.imei}`;
s.add(o);
}
});
}

// EDITAR
function editarCliente(){
const i=document.getElementById("clienteSelect").value;
if(i==="")return alert("Selecione um cliente!");
const c=clientes[i];
clienteEditando=i;
document.getElementById("nome").value=c.nome;
document.getElementById("telefone").value=c.telefone;
document.getElementById("imei").value=c.imei;
document.getElementById("marca").value=c.marca;
document.getElementById("modelo").value=c.modelo;
document.getElementById("avaria").value=c.avaria;
window.scrollTo({top:0,behavior:"smooth"});
}

// MOSTRAR FICHA
function mostrarFicha(){
const i=document.getElementById("clienteSelect").value;
if(i==="")return alert("Selecione um cliente!");
mostrarCliente();
const s=document.querySelector('input[name="status"]:checked');
document.getElementById("pStatus").innerText=s?s.value:"";
document.getElementById("printContainer").style.display="block";
window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"});
setTimeout(()=>window.print(),800);
}
</script>

</body>
</html>
