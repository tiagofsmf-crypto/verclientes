<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gaia Phone - Gestão de Clientes</title>
<style>
/* RESET */
* { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }

/* CORES NEUTRAS FUTURISTAS */
:root {
--bg-light: #f7f7f7;
--bg-dark: #1f1f1f;
--text-dark: #222;
--text-light: #fff;
--accent: #4a90e2;
--btn-hover: #357ab8;
}

/* BODY */
body {
background: var(--bg-light);
color: var(--text-dark);
min-height: 100vh;
}

/* LOGIN PAGE */
.login-container {
display: flex;
flex-direction: column;
justify-content: center;
align-items: center;
height: 100vh;
background: var(--bg-light);
}
.login-box {
background: #fff;
padding: 40px 30px;
border-radius: 12px;
box-shadow: 0 8px 20px rgba(0,0,0,0.1);
width: 320px;
text-align: center;
}
.login-box img {
width: 120px;
margin-bottom: 20px;
}
.login-box h1 {
font-size: 22px;
margin-bottom: 20px;
color: var(--accent);
}
.login-box input {
width: 100%;
padding: 12px;
margin: 10px 0;
border-radius: 8px;
border: 1px solid #ccc;
}
.login-box button {
width: 100%;
padding: 12px;
background: var(--accent);
color: var(--text-light);
border: none;
border-radius: 8px;
cursor: pointer;
font-size: 16px;
margin-top: 10px;
}
.login-box button:hover {
background: var(--btn-hover);
}

/* MAIN SITE */
.site-container { display: none; padding: 20px; max-width: 1000px; margin: auto; }

h1.site-title {
text-align: center;
margin-bottom: 20px;
color: var(--accent);
}
.main-layout {
display: flex;
gap: 20px;
}

/* FORM CONTAINER */
.form-container, .list-container {
background: #fff;
padding: 20px;
border-radius: 12px;
box-shadow: 0 4px 12px rgba(0,0,0,0.05);
flex: 1;
}
.form-container h2, .list-container h2 { margin-bottom: 15px; }

input, select, button {
width: 100%;
padding: 10px;
margin: 8px 0;
border-radius: 8px;
border: 1px solid #ccc;
font-size: 15px;
}
button { background: var(--accent); color: var(--text-light); border: none; cursor: pointer; }
button:hover { background: var(--btn-hover); }

/* CLIENT LIST */
#clienteSelect { height: 40px; }

/* PRINT CONTAINER */
.print-container {
display: none;
background: #fff;
padding: 25px;
border-radius: 12px;
max-width: 600px;
margin: 20px auto;
text-align: center;
box-shadow: 0 6px 18px rgba(0,0,0,0.1);
}
.print-container h2 { color: var(--accent); margin-bottom: 5px; }
.print-container p { margin: 5px 0; font-size: 16px; }
.print-container .status-select { margin: 10px 0; padding: 8px; border-radius: 6px; }

/* PRINT STYLING */
@media print {
body * { visibility: hidden; }
.print-container, .print-container * { visibility: visible; }
.print-container { position: absolute; left: 0; top: 0; width: 100%; margin: 0; padding: 20px; box-shadow: none; }
.print-container button { display: none; }
}
</style>
</head>
<body>

<!-- LOGIN -->
<div class="login-container" id="loginPage">
<div class="login-box">
<img src="logo.png" alt="Logo Gaia Phone">
<h1>Gaia Phone</h1>
<input type="password" id="loginPass" placeholder="Password">
<button onclick="login()">Entrar</button>
</div>
</div>

<!-- MAIN SITE -->
<div class="site-container" id="mainSite">
<h1 class="site-title">Gestão de Clientes - Gaia Phone</h1>
<div class="main-layout">
<!-- FORM -->
<div class="form-container">
<h2>Adicionar Cliente</h2>
<input type="text" id="nome" placeholder="Nome">
<input type="text" id="telefone" placeholder="Telefone">
<input type="text" id="imei" placeholder="IMEI">
<input type="text" id="marca" placeholder="Marca do Equipamento">
<input type="text" id="modelo" placeholder="Modelo do Equipamento">
<input type="text" id="avaria" placeholder="Avaria">
<button onclick="adicionarCliente()">Adicionar Cliente</button>
</div>

<!-- LISTA CLIENTES -->
<div class="list-container">
<h2>Clientes</h2>
<input type="text" id="pesquisa" placeholder="Procurar pelo Telefone ou IMEI" oninput="filtrarClientes()">
<select id="clienteSelect" onchange="mostrarCliente()">
<option value="">-- Selecionar Cliente --</option>
</select>
<button onclick="editarCliente()">Editar Cliente</button>
<button onclick="guardarCliente()">Guardar Cliente</button>
</div>
</div>

<!-- FICHA DE IMPRESSÃO -->
<div class="print-container" id="printContainer">
<img src="logo.png" alt="Logo Gaia Phone" style="width:100px; margin-bottom:10px;">
<h2>Reparações de Telemóveis</h2>
<p>Rua José Rocha, 189 A, 4430-123 V.N. Gaia</p>
<p>222 441 808 | 931 965 105</p>
<p>gaiaphone@gmail.com</p>
<hr>
<p><strong>Nome:</strong> <span id="pNome"></span></p>
<p><strong>Telefone:</strong> <span id="pTelefone"></span></p>
<p><strong>IMEI:</strong> <span id="pIMEI"></span></p>
<p><strong>Marca:</strong> <span id="pMarca"></span></p>
<p><strong>Modelo:</strong> <span id="pModelo"></span></p>
<p><strong>Avaria:</strong> <span id="pAvaria"></span></p>
<p><strong>Data de Registo:</strong> <span id="pData"></span></p>
<p><strong>Status:</strong> <span id="pStatus"></span></p>
<select id="statusSelect" class="status-select" onchange="atualizarStatus()">
<option value="Não Reparado">Não Reparado</option>
<option value="Reparado">Reparado</option>
</select>
<button onclick="window.print()">Imprimir</button>
</div>
</div>

<script>
// --- LOGIN ---
function login() {
const pass = document.getElementById('loginPass').value;
if(pass === "roque") {
document.getElementById('loginPage').style.display = 'none';
document.getElementById('mainSite').style.display = 'block';
} else {
alert("Password incorreta!");
}
}

// --- CLIENTES ---
let clientes = JSON.parse(localStorage.getItem('clientes') || '[]');
let currentEdit = null;

function adicionarCliente() {
const cliente = {
nome: document.getElementById('nome').value,
telefone: document.getElementById('telefone').value,
imei: document.getElementById('imei').value,
marca: document.getElementById('marca').value,
modelo: document.getElementById('modelo').value,
avaria: document.getElementById('avaria').value,
data: new Date().toLocaleDateString(),
status: 'Não Reparado'
};
if(!cliente.nome) { alert('Preencha o nome do cliente!'); return; }
clientes.push(cliente);
localStorage.setItem('clientes', JSON.stringify(clientes));
atualizarSelect();
limparCampos();
}

function atualizarSelect() {
const select = document.getElementById('clienteSelect');
select.innerHTML = '<option value="">-- Selecionar Cliente --</option>';
clientes.forEach((c,i)=>{
const option = document.createElement('option');
option.value = i;
option.text = `${c.nome} | ${c.telefone} | ${c.imei}`;
select.add(option);
});
}

function limparCampos() {
['nome','telefone','imei','marca','modelo','avaria'].forEach(id => document.getElementById(id).value = '');
}

function mostrarCliente() {
const index = document.getElementById('clienteSelect').value;
if(index === "") return;
const cliente = clientes[index];
currentEdit = index;

document.getElementById('pNome').innerText = cliente.nome;
document.getElementById('pTelefone').innerText = cliente.telefone;
document.getElementById('pIMEI').innerText = cliente.imei;
document.getElementById('pMarca').innerText = cliente.marca;
document.getElementById('pModelo').innerText = cliente.modelo;
document.getElementById('pAvaria').innerText = cliente.avaria;
document.getElementById('pData').innerText = cliente.data;
document.getElementById('pStatus').innerText = cliente.status;
document.getElementById('statusSelect').value = cliente.status;

document.getElementById('printContainer').scrollIntoView({behavior: "smooth"});
document.getElementById('printContainer').style.display = 'block';
}

function filtrarClientes() {
const filtro = document.getElementById('pesquisa').value.toLowerCase();
const select = document.getElementById('clienteSelect');
select.innerHTML = '<option value="">-- Selecionar Cliente --</option>';
clientes.forEach((c,i)=>{
if(c.telefone.toLowerCase().includes(filtro) || c.imei.toLowerCase().includes(filtro)){
const option = document.createElement('option');
option.value = i;
option.text = `${c.nome} | ${c.telefone} | ${c.imei}`;
select.add(option);
}
});
}

function atualizarStatus() {
if(currentEdit === null) return;
clientes[currentEdit].status = document.getElementById('statusSelect').value;
document.getElementById('pStatus').innerText = clientes[currentEdit].status;
localStorage.setItem('clientes', JSON.stringify(clientes));
}

function editarCliente() {
if(currentEdit === null) { alert("Selecione um cliente!"); return; }
const c = clientes[currentEdit];
document.getElementById('nome').value = c.nome;
document.getElementById('telefone').value = c.telefone;
document.getElementById('imei').value = c.imei;
document.getElementById('marca').value = c.marca;
document.getElementById('modelo').value = c.modelo;
document.getElementById('avaria').value = c.avaria;
window.scrollTo({top:0, behavior:"smooth"});
}

function guardarCliente() {
if(currentEdit === null) { alert("Selecione um cliente!"); return; }
const c = clientes[currentEdit];
c.nome = document.getElementById('nome').value;
c.telefone = document.getElementById('telefone').value;
c.imei = document.getElementById('imei').value;
c.marca = document.getElementById('marca').value;
c.modelo = document.getElementById('modelo').value;
c.avaria = document.getElementById('avaria').value;
localStorage.setItem('clientes', JSON.stringify(clientes));
atualizarSelect();
limparCampos();
alert("Cliente atualizado!");
}

atualizarSelect();
</script>

</body>
</html>
