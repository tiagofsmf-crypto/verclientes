<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Gaia Phone - Gest√£o de Clientes</title>
<style>
:root{
--bg:#f2f4f7;
--card:#ffffff;
--navy:#0d2340;
--navy-dark:#07162a;
--muted:#666;
}
html,body{height:100%;margin:0;font-family:Inter,Arial,Helvetica,sans-serif;background:var(--bg);color:#222}
.container{max-width:980px;margin:24px auto;padding:20px}

/* login */
.login-wrap{max-width:420px;margin:80px auto;background:var(--card);padding:28px;border-radius:10px;box-shadow:0 6px 20px rgba(5,20,40,0.08);text-align:center}
.login-wrap img{width:120px;margin-bottom:14px}
.login-wrap input{width:100%;padding:12px;border-radius:8px;border:1px solid #d6dbe3;margin:10px 0;font-size:15px}
.login-wrap button{width:100%;padding:12px;border-radius:8px;border:none;background:var(--navy);color:white;font-weight:600;cursor:pointer}
.login-wrap button:hover{background:var(--navy-dark)}

/* app */
.app{display:none}
.header{display:flex;align-items:center;gap:16px;margin-bottom:14px}
.header img{width:64px}
.header h1{margin:0;font-size:20px;color:var(--navy)}

/* grid */
.grid{display:grid;grid-template-columns:1fr 360px;gap:20px}
.card{background:var(--card);padding:16px;border-radius:10px;box-shadow:0 6px 18px rgba(5,20,40,0.06)}
.card h2{margin:0 0 12px 0;font-size:16px;color:var(--navy)}
.field{margin-bottom:8px}
input[type="text"], input[type="tel"], select{width:100%;padding:10px;border-radius:8px;border:1px solid #d6dbe3;font-size:14px}
.row{display:flex;gap:8px;flex-wrap:wrap}
button{padding:10px 12px;border-radius:8px;border:none;background:var(--navy);color:#fff;cursor:pointer;font-weight:600}
button.secondary{background:#e6eef8;color:var(--navy);border:1px solid #cfe2ff}

/* small */
.small{font-size:13px;color:var(--muted)}

/* print container */
.print-container{display:none;max-width:680px;margin:18px auto;padding:18px;background:white;border-radius:10px;box-shadow:0 10px 30px rgba(5,20,40,0.08);text-align:center}
.print-logo{width:90px;margin-bottom:8px}
.print-container h2{margin:4px 0 10px 0;color:var(--navy)}
.print-container p{margin:6px 0;font-size:15px}

/* hide things in print */
@media print{
body *{visibility:hidden}
.print-container, .print-container *{visibility:visible}
.print-container{position:fixed;left:0;top:0;width:100%;height:auto;margin:0;padding:20px;box-shadow:none}
.no-print{display:none !important}
}

/* responsive */
@media (max-width:900px){
.grid{grid-template-columns:1fr}
}
</style>
</head>
<body>

<!-- LOGIN -->
<div class="login-wrap" id="loginWrap">
<img src="logo.png" alt="Logo Gaia Phone">
<h2>Gaia Phone ‚Äî Acesso</h2>
<p class="small">Introduz a senha para aceder ao painel</p>
<input id="pw" type="password" placeholder="Senha" />
<button id="loginBtn">Entrar</button>
</div>

<!-- APP -->
<div class="container app" id="app">
<div class="header">
<img src="logo.png" alt="logo">
<div>
<h1>Gaia Phone ‚Äî Gest√£o de Clientes</h1>
<div class="small">Rua Jos√© Rocha, 189 A ‚Äî 4430-123 V.N. Gaia ‚Ä¢ 222 441 808 / 931 965 105 ‚Ä¢ gaiaphone@gmail.com</div>
</div>
</div>

<div class="grid">
<!-- Left -->
<div class="card" id="leftCard">
<h2>Adicionar / Editar Cliente</h2>

<div class="field"><input id="nome" type="text" placeholder="Nome"></div>
<div class="field"><input id="telefone" type="tel" placeholder="Telefone"></div>
<div class="field"><input id="imei" type="text" placeholder="IMEI"></div>
<div class="field"><input id="marca" type="text" placeholder="Marca"></div>
<div class="field"><input id="modelo" type="text" placeholder="Modelo"></div>
<div class="field"><input id="avaria" type="text" placeholder="Avaria"></div>

<div class="row" style="margin-top:12px">
<button id="addBtn">Adicionar Cliente</button>
<button id="saveBtn" class="secondary">Guardar Edi√ß√£o</button>
<button id="clearBtn" class="secondary">Limpar Campos</button>
</div>
</div>

<!-- Right -->
<div class="card">
<h2>Clientes</h2>
<div class="field"><input id="pesquisa" type="text" placeholder="Procurar por Telefone / IMEI / Nome"></div>
<div class="field"><select id="clienteSelect" size="8" style="height:220px"></select></div>
<div class="row">
<button id="editBtn" class="secondary">Editar Cliente</button>
<button id="showPrintBtn">Abrir Ficha</button>
</div>
<div class="field" style="margin-top:10px">
<div class="small">Status (seleciona antes de imprimir):</div>
<label><input type="radio" name="status" value="Reparado"> Reparado</label>
<label><input type="radio" name="status" value="N√£o Reparado"> N√£o Reparado</label>
</div>
<div style="margin-top:10px">
<button id="printBtn" class="no-print">üñ®Ô∏è Imprimir Ficha</button>
</div>
</div>
</div>

<!-- Ficha Impress√£o -->
<div class="print-container" id="printContainer">
<img class="print-logo" src="logo.png" alt="Logo">
<h2>Repara√ß√µes de Telem√≥veis</h2>
<div class="small">Rua Jos√© Rocha, 189 A ‚Äî 4430-123 V.N. Gaia</div>
<div class="small">222 441 808 ‚Ä¢ 931 965 105 ‚Ä¢ gaiaphone@gmail.com</div>
<hr style="margin:12px 0">

<p><strong>Nome:</strong> <span id="pNome"></span></p>
<p><strong>Telefone:</strong> <span id="pTelefone"></span></p>
<p><strong>IMEI:</strong> <span id="pIMEI"></span></p>
<p><strong>Marca:</strong> <span id="pMarca"></span></p>
<p><strong>Modelo:</strong> <span id="pModelo"></span></p>
<p><strong>Avaria:</strong> <span id="pAvaria"></span></p>
<p><strong>Data de Registo:</strong> <span id="pData"></span></p>
<p><strong>Status:</strong> <span id="pStatus"></span></p>
</div>
</div>

<script>
/* LOGIN */
const PASSWORD = "roque";
const loginWrap = document.getElementById('loginWrap');
const app = document.getElementById('app');
document.getElementById('loginBtn').addEventListener('click', tryLogin);
document.getElementById('pw').addEventListener('keyup', e => { if(e.key==="Enter") tryLogin(); });
function tryLogin(){
const pw = document.getElementById('pw').value;
if(pw===PASSWORD){ loginWrap.style.display='none'; app.style.display='block'; carregar(); }
else alert('Senha incorreta');
}

/* VARS */
let clientes = [];
let editIndex = null;

/* ELEMENTOS */
const select = document.getElementById('clienteSelect');
const pesquisa = document.getElementById('pesquisa');

/* EVENTOS */
document.getElementById('addBtn').onclick = addCliente;
document.getElementById('saveBtn').onclick = saveEdit;
document.getElementById('editBtn').onclick = editarCliente;
document.getElementById('showPrintBtn').onclick = abrirFicha;
document.getElementById('printBtn').onclick = imprimirFicha;
document.getElementById('clearBtn').onclick = limparCampos;
pesquisa.oninput = filtrar;

/* FUN√á√ïES */
function lerCampos(){
return {
nome: nome.value.trim(),
telefone: telefone.value.trim(),
imei: imei.value.trim(),
marca: marca.value.trim(),
modelo: modelo.value.trim(),
avaria: avaria.value.trim(),
data: new Date().toLocaleDateString()
};
}
function preencherCampos(c){
nome.value=c.nome||'';telefone.value=c.telefone||'';imei.value=c.imei||'';
marca.value=c.marca||'';modelo.value=c.modelo||'';avaria.value=c.avaria||'';
}
function limparCampos(){
nome.value=telefone.value=imei.value=marca.value=modelo.value=avaria.value='';
editIndex=null;
}

function carregar(){
clientes = JSON.parse(localStorage.getItem('clientes')||'[]');
atualizarSelect();
}
function guardar(){
localStorage.setItem('clientes', JSON.stringify(clientes));
}

function atualizarSelect(list){
select.innerHTML='';
const arr=list||clientes;
if(arr.length===0){const o=document.createElement('option');o.text='-- Sem clientes --';select.add(o);return;}
arr.forEach((c,i)=>{const opt=document.createElement('option');opt.value=i;opt.text=`${c.nome} ‚Äî ${c.telefone}`;select.add(opt);});
}
function filtrar(){
const t=pesquisa.value.toLowerCase();
atualizarSelect(clientes.filter(c=>c.nome.toLowerCase().includes(t)||c.telefone.includes(t)||c.imei.includes(t)));
}

function addCliente(){
const c=lerCampos();if(!c.nome){alert('Nome obrigat√≥rio');return;}
clientes.push(c);guardar();atualizarSelect();limparCampos();
}

function editarCliente(){
const i=select.value;if(i===''){alert('Seleciona um cliente');return;}
editIndex=i;preencherCampos(clientes[i]);
document.getElementById('leftCard').scrollIntoView({behavior:'smooth'});
}

function saveEdit(){
if(editIndex===null){alert('Nenhum cliente em edi√ß√£o');return;}
const c=lerCampos();
clientes[editIndex]={...clientes[editIndex],...c};
guardar();atualizarSelect();limparCampos();alert('Guardado!');
}

function abrirFicha(){
const i=select.value;if(i===''){alert('Seleciona um cliente');return;}
const c=clientes[i];
document.getElementById('pNome').textContent=c.nome;
document.getElementById('pTelefone').textContent=c.telefone;
document.getElementById('pIMEI').textContent=c.imei;
document.getElementById('pMarca').textContent=c.marca;
document.getElementById('pModelo').textContent=c.modelo;
document.getElementById('pAvaria').textContent=c.avaria;
document.getElementById('pData').textContent=c.data;
const statusSel=document.querySelector('input[name="status"]:checked');
document.getElementById('pStatus').textContent=statusSel?statusSel.value:'N√£o definido';
document.getElementById('printContainer').style.display='block';
document.getElementById('printContainer').scrollIntoView({behavior:'smooth'});
}

function imprimirFicha(){
window.print();
}
</script>
</body>
</html>
